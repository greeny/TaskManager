<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="robots" content="{$robots}" n:ifset="$robots">

	<title>{#title}GameTeam.cz Úkolníček{/#}</title>

	<link rel="stylesheet" href="{$basePath}/css/bootstrap.css">
	<link rel="stylesheet" href="{$basePath}/css/font-awesome.css">
	<link rel="stylesheet" href="{$basePath}/css/jquery-ui.css">
	<link rel="stylesheet" href="{$basePath}/css/common.css">
	<link rel="shortcut icon" href="{$basePath}/favicon.ico">
	{#head}{/#}
</head>

<body>
	<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			{snippet navbar}
			<div class="navbar-header">
				<a class="navbar-brand ajax" n:href=":Public:Dashboard:default">Úkolníček</a>
			</div>

			<ul class="nav navbar-nav navbar-left">
				<li n:class="$presenter->isLinkCurrent(':Public:Board:projects') ? active"><a class="ajax" n:href=":Public:Board:projects">Seznam projektů</a></li>
			</ul>

			<ul class="nav navbar-nav navbar-right">
				{if $user->isLoggedIn()}
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span> {$user->identity->nick} <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li{ifCurrent :Public:User:detail} class="active"{/ifCurrent}><a n:href=":Public:User:detail $user->identity->name"><span class="glyphicon glyphicon-credit-card"></span> Zobrazit profil</a></li>
							<li{ifCurrent :Public:User:settings} class="active"{/ifCurrent}><a n:href=":Public:User:settings"><span class="glyphicon glyphicon-wrench"></span> Nastavení osobních údajů</a></li>
							<li><a n:href="logout!"><span class="glyphicon glyphicon-log-out"></span> Odhlásit se</a></li>
						</ul>
					</li>
				{else}
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span> Nepřihlášen <b class="caret"></b></a>
						<ul class="dropdown-menu">
							<li><a data-toggle="modal" data-target="#modal-register" href="#"><span class="glyphicon glyphicon-plus"></span> Registrace</a></li>
							<li><a data-toggle="modal" data-target="#modal-login" href="#"><span class="glyphicon glyphicon-log-in"></span> Přihlášení</a></li>
						</ul>
					</li>
				{/if}
			</ul>
			{/snippet}
		</div>
	</div>
	<div class="container">
		{snippet flashes}
			{#flash}
				{foreach $flashes as $flash}
					<div class="alert alert-{$flash->type} alert-dismissable fade in">
						<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
						{$flash->message}
					</div>
				{/foreach}
			{/#}
		{/snippet}
	</div>

	{snippet content}
		{#outerContent}{/#}
		<div class="container">
			{#content}
				Obsah nedodán
			{/#}

			{if !$user->isLoggedIn()}
				<div class="modal fade" id="modal-register">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">&times;</button>
								<h4 class="modal-title">Registrace</h4>
							</div>

							{form registerForm, class => 'ajax'}
								<div class="modal-body">
									<div class="form-group">{label nick}{/label} {input nick, class => 'form-control'}</div>
									<div class="form-group">{label password}{/label} {input password, class => 'form-control'}</div>
									<div class="form-group">{label password2}{/label} {input password2, class => 'form-control'}</div>
									<div class="form-group">{label email}{/label} {input email, class => 'form-control'}</div>
								</div>

								<div class="modal-footer">
									{input register, class => 'btn btn-primary'}
								</div>
							{/form}
						</div>
					</div>
				</div>

				<div class="modal fade" id="modal-login">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal">&times;</button>
								<h4 class="modal-title">Přihlášení</h4>
							</div>

							{form loginForm, class => 'ajax'}
								<div class="modal-body">
									<div class="form-group">{label nick}{/label} {input nick, class => 'form-control'}</div>
									<div class="form-group">{label password}{/label} {input password, class => 'form-control'}</div>
								</div>

								<div class="modal-footer">
									{input login, class => 'btn btn-primary'}
								</div>
							{/form}
						</div>
					</div>
				</div>
			{/if}
		</div>
	{/snippet content}

	<script src="{$basePath}/js/jquery.js"></script>
	<script src="{$basePath}/js/jquery-ui.js"></script>
	<script src="{$basePath}/js/jquery-ui.cs.js"></script>
	<script src="{$basePath}/js/netteForms.js"></script>
	<script src="{$basePath}/js/nette.ajax.js"></script>
	<script src="{$basePath}/js/bootstrap.js"></script>
	<script src="{$basePath}/js/bootstrap.typeahead.js"></script>
	<script src="{$basePath}/js/common.js"></script>
	<script>
		$(function () {
			$.nette.init();
		});
	</script>
	{#scripts}
	{/#}

	{snippet essentials}
		<script>
			$('a.ajax').on('click', function(){
				history.pushState({}, '', $(this).attr('href'));
			});
		</script>
	{/snippet}
</body>
</html>